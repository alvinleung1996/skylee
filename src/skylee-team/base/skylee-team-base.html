<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../../../bower_components/shadycss/apply-shim.html">

<link rel="import" href="../../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../../../bower_components/iron-resizable-behavior/iron-resizable-behavior.html">

<link rel="imoprt" href="../../../bower_components/curium-animated-pages/curium-animated-pages.html">
<link rel="import" href="../../../bower_components/curium-route/curium-route.html">

<link rel="import" href="../../skylee-page-scroll-behavior/skylee-page-scroll-behavior.html">
<link rel="import" href="../../skylee-styles/skylee-styles.html">
<link rel="import" href="./skylee-team-base-album-image-tile.html">

<dom-module id="skylee-team-base">
  <template strip-whitespace>
    <style>
      :host {
        display: block;
      }

      .header-block {
        padding: 20px;
        display: flex;
        align-items: center;
      }
      .header-block__icon {
        width: 48px;
        height: 48px;
        --iron-image-width: 100%;
      }
      .header-block__text {
        margin-left: 16px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
      }
      @media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {  
        .header-block__text {
          /* IE11 Bug: items not wrap when no enough space */
          align-items: stretch;
        }
      }
      .header-block__name {
        margin: 0;
        @apply --skylee-text--headline_font;
        color: var(--skylee-text--primary_color);
      }
      .header-block__description {
        margin: 0;
        @apply --skylee-text--body1_font;
        color: var(--skylee-text--secondary_color);
        text-align: justify;
      }

      .album-block {
        padding: 20px;
      }
      .album-block__header {
      }
      .album-block__name {
        margin: 0;
        @apply --skylee-text--headline_font;
        color: var(--skylee-text--primary_color);
      }
      .album-block__image-tiles {
        margin-top: 16px;
        display: flex;
        flex-wrap: wrap;
      }
      .album-block__image-tile {
        flex: 0 1 300px;
        margin: 5px; 
      }
       @supports (display: grid) {
        .album-block__image-tiles {
          flex-wrap: initial;

          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, auto));
          grid-auto-rows: auto;
          grid-gap: 10px;
        }
        .album-block__image-tile {
          flex: initial;
          margin: initial; 
        }
      } 
    </style>

    <iron-media-query query="not all and (min-width: 300px)" query-matches="{{_narrowLayout}}" full></iron-media-query>

    <header class="header-block">
      <iron-image class="header-block__icon" src="[[iconSrc]]" preload fade></iron-image>
      <div class="header-block__text">
        <h2 class="header-block__name">[[name]]</h2>
        <p class="header-block__description">[[description]]</p>
      </div>
    </header>

    <template is="dom-repeat" items="[[albumList]]" as="album">
      <div class="album-block">

        <header class="album-block__header">
          <h2 class="album-block__name">[[album.name]]</h2>
        </header>

        <div class="album-block__image-tiles">

          <template is="dom-repeat" items="[[album.imageList]]" as="image">
            <skylee-team-base-album-image-tile
              class="album-block__image-tile"
              src="[[image.src]]"
              name="[[image.name]]">
            </skylee-team-base-album-image-tile>
          </template>

        </div>

      </div>
    </template>

  </template>
  <script>
    class SkyleeTeamBase extends Skylee.SkyleePageScrollBehavior(Polymer.mixinBehaviors(Polymer.IronResizableBehavior, Polymer.Element)) {
    
      static get is() { return 'skylee-team-base'; }

      static get properties() {
        return {
          pageTitle: String,
          iconSrc: String,
          name: String,
          description: String,
          albumList: Array,
          
          toolbarBackButtonUrl: {
            type: String,
            value: `${Polymer.rootPath}team`,
            readOnly: true,
            notify: true
          },

        };
      }

    }
  </script>
</dom-module>
